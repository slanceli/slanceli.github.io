<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>纸笺流华</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-10-05T05:02:52.456Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Slanceli</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SS&amp;SSR的搭建、配置与加速</title>
    <link href="http://yoursite.com/2018/10/03/SS-SSR%E7%9A%84%E6%90%AD%E5%BB%BA%E3%80%81%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%8A%A0%E9%80%9F/"/>
    <id>http://yoursite.com/2018/10/03/SS-SSR的搭建、配置与加速/</id>
    <published>2018-10-03T09:40:04.000Z</published>
    <updated>2018-10-05T05:02:52.456Z</updated>
    
    <content type="html"><![CDATA[<p>教大家如何搭建SS&amp;SSR，从而实现科学上网。</p><a id="more"></a><h2 id="SS-amp-SSR是什么？与VPN有什么区别？"><a href="#SS-amp-SSR是什么？与VPN有什么区别？" class="headerlink" title="SS&amp;SSR是什么？与VPN有什么区别？"></a>SS&amp;SSR是什么？与VPN有什么区别？</h2><h3 id="何为SS？"><a href="#何为SS？" class="headerlink" title="何为SS？"></a>何为SS？</h3><p>SS全称shadowsocks，一开始为个人独立开发并用作“科学上网”，后被大家所熟知和广泛使用。再后来，据说作者被请去“喝茶”，停止了该项目。</p><h3 id="何为SSR"><a href="#何为SSR" class="headerlink" title="何为SSR?"></a>何为SSR?</h3><p>SSR全称shadowsocks-R。SSR作者声称SS不够隐匿，容易被防火墙检测到，SSR在改进了混淆和协议，更难被防火墙检测到。简单地说，SSR是SS的改进版。</p><h3 id="SS-amp-SSR与VPN的区别"><a href="#SS-amp-SSR与VPN的区别" class="headerlink" title="SS&amp;SSR与VPN的区别"></a>SS&amp;SSR与VPN的区别</h3><p>目的（作用）不同，VPN是为了保证通信的安全性、私密性，不是专门为“科学上网”制定的技术；而SS/SSR则是为了转发客户端流量，绕过防火墙的检测，从而达到“科学上网”的真实意图，但是没有保证数据传输的安全性。</p><h2 id="购买VPS"><a href="#购买VPS" class="headerlink" title="购买VPS"></a>购买VPS</h2><p>如果你有VPS，请跳过这部分。<br>注：VPS必须是国外的，否则不能达到科学上网的目的。</p><p>服务器推荐使用<a href="https://www.vultr.com/" target="_blank" rel="noopener">Vultr</a>。这是老牌服务器商，不怕跑路；VPS是按小时计费的，并且如果你的IP被墙，可以直接删掉VPS，重新开一个，收费也不贵，最便宜的$3.5一个月。</p><h3 id="新用户注册"><a href="#新用户注册" class="headerlink" title="新用户注册"></a>新用户注册</h3><p>首先去<a href="https://www.vultr.com/" target="_blank" rel="noopener">Vultr官网</a>，注册一个账号，链接打开的页面如下图所示：<br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538561691/SSR/Vultr1.png" alt=""><br>如果你连这点英文看着都费劲的话，那还是离开吧，科学上网不适合你。</p><h3 id="Vultr充值"><a href="#Vultr充值" class="headerlink" title="Vultr充值"></a>Vultr充值</h3><p>注册完毕并验证邮箱后，进入<a href="https://www.vultr.com/" target="_blank" rel="noopener">Vultr</a>，在<strong> Billing </strong>标签下选择支付方式（支持支付宝）<br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538563099/SSR/Vultr2.png" alt=""></p><h3 id="新建VPS"><a href="#新建VPS" class="headerlink" title="新建VPS"></a>新建VPS</h3><p>重置完毕后，在<strong> Servers </strong>标签下可以看见一个加号，点击，然后选择VPS的地区，推荐日本和新加坡的服务器，因为这两个地区离大陆比较近，速度会比较快，延迟会比较低；接着选VPS的操作系统，CetOS 7 *64的就行；然后就是VPS的配置了，根据个人的情况而定。（注：有一个2.5$一个月的，那一个是不提供IPv4的，也就是说如果你的终端不能连接IPv6，就不能使用，所以挑选VPS的时候，请避开这个配置。）最后点击<strong> Deploy Now </strong>。<br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538573156/SSR/Vultr3.png" alt=""><br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538573156/SSR/Vultr4.png" alt=""><br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538573156/SSR/Vultr5.png" alt=""><br>创建完成后会在<strong> Servers </strong>标签下看见你的VPS，等待右边<strong> Status </strong>下显示<strong> Running </strong>后点击<strong> Cloud Instance </strong>，之后你会看到你创建的VPS的详细信息，请不要关闭这个页面，待会儿会用到。<br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538573584/SSR/Vultr6.png" alt=""><br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538573584/SSR/Vultr7.png" alt=""></p><h2 id="远程连接VPS"><a href="#远程连接VPS" class="headerlink" title="远程连接VPS"></a>远程连接VPS</h2><p>连接VPS有很多工具，在这里仅介绍Xshell的使用方法。</p><h3 id="下载Xshell"><a href="#下载Xshell" class="headerlink" title="下载Xshell"></a>下载Xshell</h3><p>我在这里提供<a href="https://pan.baidu.com/s/1NPUwyoUUWRIwkXdbUY_9AA" target="_blank" rel="noopener">Xshell的免费版</a>,提取码：hhiw，如果你觉得我会在软件里放后门，那么请自行到官网下载。</p><h3 id="安装Xshell"><a href="#安装Xshell" class="headerlink" title="安装Xshell"></a>安装Xshell</h3><p>这个我不想说什么。</p><h3 id="连接VPS"><a href="#连接VPS" class="headerlink" title="连接VPS"></a>连接VPS</h3><p>打开Xshell，点击新建，名称随便，主机填写刚才购买的VPS的IP地址，也就是刚才页面中的<strong> IP Address </strong>,然后点击左边一栏的<strong> 用户身份验证 </strong>，用户名输入<strong> root </strong>，密码不用我教你了吧？最后连接就是了，稍后会弹出一个窗口，点接受并保存。<br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538575074/SSR/Xshell1.png" alt=""><br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538575074/SSR/Xshell2.png" alt=""><br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538575078/SSR/Xshell3.png" alt=""></p><h2 id="开始搭建SS-amp-SSR"><a href="#开始搭建SS-amp-SSR" class="headerlink" title="开始搭建SS&amp;SSR"></a>开始搭建SS&amp;SSR</h2><p><strong> 注意：</strong>shadowsocks/shadowsocksR这两个只需要搭建一个就可以了！由于SSR作者已弃坑，不再跟新。所以我只教搭建SS，搭建SSR的方法雷同，请自行找脚本。但是shadowsocks又有很多分支我推荐使用libev版，这是目前还在更新的。</p><h3 id="一键搭建SS-amp-SSR"><a href="#一键搭建SS-amp-SSR" class="headerlink" title="一键搭建SS&amp;SSR"></a>一键搭建SS&amp;SSR</h3><p>在购买VPS并用Xshell连接上你刚购买的VPS后，你将看到如下图所示的界面：<br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538575078/SSR/Xshell4.png" alt=""><br>1.下载脚本（直接复制命令到绿色光标那里回车即可）<br><strong> 中文版： </strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O shadowsocks-libev_CN.sh https://raw.githubusercontent.com/uxh/shadowsocks_bash/master/shadowsocks-libev_CN.sh &amp;&amp; bash shadowsocks-libev_CN.sh</span><br></pre></td></tr></table></figure></p><p><strong> 英文版：（如果中文版执行后出现乱码，那么请使用这个） </strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O shadowsocks-libev.sh https://raw.githubusercontent.com/uxh/shadowsocks_bash/master/shadowsocks-libev.sh &amp;&amp; bash shadowsocks-libev.sh</span><br></pre></td></tr></table></figure></p><p>回车后系统会自行下载脚本并运行,如下图所示（如果你要重新安装或者卸载请在命令行输入：<strong> bash shadowsocks-libev_CN.sh </strong>,英文版请输入：<strong> bash shadowsocks-libev.sh </strong>）。<br><strong> 如果无法下载，请更改VPS的DNS地址为8.8.8.8，具体请百度。 </strong><br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538577202/SSR/Xshell5.png" alt=""><br>2.输入Shadowsocks的连接密码，回车。<strong> （如果密码输错了，请按住 Ctrl 键后再按删除键，直接按删除键是不能删除的。或者修改连接VPS的属性，这个我到文章最后教大家） </strong><br>3.设置SS端口，不要使用22端口，推荐80/443/8080端口，使用高位端口容易被防火墙检测，导致VPS被墙，那样就用不了了。<br>4.设置SS加密，推荐<strong> 3)aes-256-cfb </strong>或<strong> 6)chacha20 </strong>（直接输入前面的数字回车就行）<br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538578148/SSR/Xshell6.png" alt=""><br>5.确认以上信息无误后，回车继续。安装过程耗时 2~5 分钟，完成后请把红框里的信息保存下来，方便以后查询使用 。<br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538578148/SSR/Xshell7.png" alt=""></p><h2 id="安装TCP加速软件"><a href="#安装TCP加速软件" class="headerlink" title="安装TCP加速软件"></a>安装TCP加速软件</h2><p>前面虽然已经搭建好了 SS，但是因为服务器位于国外，连接速度会较慢，所以我们非常必要在服务器上安装 TCP 加速软件来提速。一般大家常用的 TCP 加速软件有锐速和 Google BBR 拥塞控制算法。<br>这里只教大家用Google BBR加速，因为是开源的，免费的，锐速要么花钱买，要么用破解版的，而我是比较讨厌破解版的，所以想用锐速的请自行百度或Google。<br>BBR分原版的BBR和魔改版的BBR，原版和魔改版 Google BBR 在不同地区的服务器上会有不同效果，具体孰优孰劣请分别安装进行测试。</p><h3 id="原版Google-BBR"><a href="#原版Google-BBR" class="headerlink" title="原版Google BBR"></a>原版Google BBR</h3><p>连接VPS输入以下命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh &amp;&amp; chmod +x bbr.sh &amp;&amp; ./bbr.sh</span><br></pre></td></tr></table></figure><br>回车后系统会自行下载脚本并执行，脚本执行后会显示出当前系统以及系统内核版本，我们直接回车确认安装即可。<br>回车后脚本会继续执行并自动安装最新版系统内核同时开启 Google BBR 拥塞控制算法。当脚本安装完毕后会询问我们是否重启服务器，按照下图提示，我们首先输入“y”，然后回车确认重启即可。如果VPS这时候卡住了，没关系打开下图的页面，点击圈出来的按钮，等待几分钟重新连接VPS就好了。<br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538579014/SSR/Vultr8.png" alt=""><br>重新连接后，运行下列命令对比输出值是否一致。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.ipv4.tcp_available_congestion_control</span><br></pre></td></tr></table></figure><br>执行后输出值需为：net.ipv4.tcp_available_congestion_control = reno cubic bbr。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.ipv4.tcp_congestion_control</span><br></pre></td></tr></table></figure><br>执行后输出值需为：net.ipv4.tcp_congestion_control = bbr。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.core.default_qdisc</span><br></pre></td></tr></table></figure><br>执行后输出值需为：net.core.default_qdisc = fq。</p><p>以上三条命令的输出值正确后则说明原版 Google BBR 已经成功安装并开机自启动。</p><h3 id="魔改版Google-BBR"><a href="#魔改版Google-BBR" class="headerlink" title="魔改版Google BBR"></a>魔改版Google BBR</h3><p><strong> 注：魔改版 Google BBR 和 原版 Google BBR 不能够共存的，不要同时安装。 </strong></p><p>连接VPS，然后输入下列命令：<br><em>CentOS 6/7 x64 系统请用这个</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash tcp_nanqinlang-1.3.2.sh</span><br></pre></td></tr></table></figure></p><p><em>Debian 7/8 x64 系统请用这个</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash tcp_nanqinlang-fool-1.3.0.sh</span><br></pre></td></tr></table></figure></p><p>然后回到 Xshell 软件，鼠标右击选择粘贴，回车继续。<br>回车后系统会自动运行脚本。我们输入“2”（即开启魔改版 Google BBR 算法），然后回车继续即可。<br>回车后系统会自行执行开启算法命令，然后我们输入“y”，然后回车即可继续开启。<br>当最后出现<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Info] tcp_nanqinlang is installed!</span><br><span class="line">[Info] tcp_nanqinlang is running!</span><br></pre></td></tr></table></figure><br>代表魔改版Google BBR 已经成功安装并开机自启动。</p><h2 id="SS客户端的安装与配置"><a href="#SS客户端的安装与配置" class="headerlink" title="SS客户端的安装与配置"></a>SS客户端的安装与配置</h2><h3 id="客户端下载"><a href="#客户端下载" class="headerlink" title="客户端下载"></a>客户端下载</h3><p>我把Windows、Android、Mac的客户端都上传到我的网盘了，自行下载，如果是魅族用户，请下载魅族专用版。网盘地址：<a href="https://www.lanzous.com/b394444/" target="_blank" rel="noopener">https://www.lanzous.com/b394444/</a> 密码:6il9<br>Windows 客户端若无法运行则请先安装 NET4.6.2<br>iPhone/iPad 客户端：请通过电脑版 PP 助手安装 Shadowrocket。</p><h3 id="客户端安装"><a href="#客户端安装" class="headerlink" title="客户端安装"></a>客户端安装</h3><p>无需废话</p><h3 id="客户端的配置"><a href="#客户端的配置" class="headerlink" title="客户端的配置"></a>客户端的配置</h3><p>直接把红框里的信息挨个填入就好了，其他保持默认，或者直接把红框里下面的那一串代码复制到客户端导入就行，具体请自行研究。<br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538578148/SSR/Xshell7.png" alt=""></p><h2 id="更改键盘属性"><a href="#更改键盘属性" class="headerlink" title="更改键盘属性"></a>更改键盘属性</h2><p>打开Xshell，点击属性，如下图所示。<br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538579873/SSR/Xshell8.png" alt=""><br>然后点左边菜单栏的<strong> 键盘 </strong>，修改成如下图所示的样子。<br><img src="https://res.cloudinary.com/excitedxxoo/image/upload/v1538579873/SSR/Xshell9.png" alt=""><br>确定就行了。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;教大家如何搭建SS&amp;amp;SSR，从而实现科学上网。&lt;/p&gt;
    
    </summary>
    
      <category term="SS&amp;SSR" scheme="http://yoursite.com/categories/SS-SSR/"/>
    
    
      <category term="SS" scheme="http://yoursite.com/tags/SS/"/>
    
      <category term="SSR" scheme="http://yoursite.com/tags/SSR/"/>
    
  </entry>
  
</feed>
